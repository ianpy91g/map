<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Church Locations Map (Colored)</title>

  <!-- Leaflet -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/leaflet@1.6.0/dist/leaflet.css"/>
  <script src="https://cdn.jsdelivr.net/npm/leaflet@1.6.0/dist/leaflet.js"></script>

  <style>
    html, body { width: 100%; height: 100%; margin: 0; padding: 0; }
    body { display: flex; flex-direction: column; font-family: system-ui, -apple-system, "Segoe UI", Roboto, "Noto Sans TC", Arial, sans-serif; }
    #map { flex: 1 1 auto; width: 100%; }
    #legend {
      flex: 0 0 auto;
      padding: 10px 12px;
      border-top: 1px solid #e5e7eb;
      background: #fff;
      font-size: 14px;
      line-height: 1.5;
    }
    .legend-row { display: flex; align-items: center; gap: 10px; margin: 4px 0; }
    .swatch {
      width: 12px; height: 12px; border-radius: 50%;
      display: inline-block;
      border: 2px solid rgba(0,0,0,0.35);
      box-sizing: border-box;
    }
    .muted { color: #6b7280; font-size: 12px; margin-top: 6px; }
  </style>
</head>
<body>
  <div id="map"></div>

  <!-- Color legend / explanation -->
  <div id="legend">
    <div><b>Color Legend</b></div>
    <div class="legend-row"><span class="swatch" style="background:#ef4444"></span><span>3/19 (Thu) Red: Church in Hsinchu City — Renai Meeting Hall</span></div>
    <div class="legend-row"><span class="swatch" style="background:#f59e0b"></span><span>3/20 (Fri) Orange: Church in Taichung City — Fuxing Building</span></div>
    <div class="legend-row"><span class="swatch" style="background:#10b981"></span><span>3/21 (Sat) Green: Bus A (Church in Puli Township— 1st Meeting Hall)</span></div>
    <div class="legend-row"><span class="swatch" style="background:#3b82f6"></span><span>3/21 (Sat) Blue: Bus B (Church in Shetou Township)</span></div>
    <div class="legend-row"><span class="swatch" style="background:#8b5cf6"></span><span>3/22 (Sun) Purple: Church in Taoyuan City — Meeting Hall 2</span></div>
    <div class="muted">Click a colored marker to view details.</div>
  </div>

  <script>
    // 5 points with colors
    const places = [
      { date: "3/19 (Thu)-3/20 (Fri)", color: "#ef4444", name: "Church in Hsinchu City  — Renai Meeting Hall", Lat: 24.80855,  Lon: 120.97089 },
      { date: "3/20 (Fri)-3/21 (Sat)", color: "#f59e0b", name: "Church in Taichung City — Fuxing Building", Lat: 24.13420, Lon: 120.68158 },
      { date: "3/21 (Sat)-3/22 (Sun) Bus A", color: "#10b981", name: "Church in Puli Township — 1st Meeting Hall", Lat: 23.97805, Lon: 120.97039 },
      { date: "3/21 (Sat)-3/22 (Sun) Bus B", color: "#3b82f6", name: "Church in Shetou Township", Lat: 23.89649,  Lon: 120.58542 },
      { date: "3/22 (Sun)-3/23 (Mon)", color: "#8b5cf6", name: "Church in Taoyuan City — Meeting Hall 2", Lat: 24.95565,  Lon: 121.22391 }
    ];

    const map = L.map("map", {
      center: [24.3, 121.0],
      zoom: 8,
      zoomControl: true
    });

    L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png", {
      attribution: 'Data by &copy; <a href="http://openstreetmap.org">OpenStreetMap</a>, under <a href="http://www.openstreetmap.org/copyright">ODbL</a>.',
      maxZoom: 22
    }).addTo(map);

    const bounds = [];
    places.forEach(p => {
      const marker = L.circleMarker([p.Lat, p.Lon], {
        radius: 9,
        color: "rgba(0,0,0,0.45)",
        weight: 2,
        fillColor: p.color,
        fillOpacity: 0.9
      }).addTo(map);

      marker.bindPopup(`
        <div style="font-size:14px;line-height:1.5">
          <div style="font-weight:700">${p.date}：${p.name}</div>
          <div>Lat: ${p.Lat}</div>
          <div>Lon: ${p.Lon}</div>
        </div>
      `);

      bounds.push([p.Lat, p.Lon]);
    });

    map.fitBounds(bounds, { padding: [30, 30] });
  </script>
</body>
</html>
